(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e26cf5fe"],{"25e1":function(e,t,a){},4886:function(e,t,a){},"5ba1":function(e,t,a){"use strict";a.r(t);var s=a("5530"),r=(a("159b"),a("b0c0"),a("d81d"),a("99c5")),i=a("365c");Object(i.a)(r.a,r.y,"");var n=function(e){return Object(r.i)(e)},o=function(e){return Object(r.h)(e)},l=function(e){return Object(r.j)(e)},c=function(e){return Object(r.l)(e)},u=a("ed08"),h={name:"EditRoles",data:function(){return{form:this.initForm(),loading:!0,isEdit:!1,rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],roles:[{required:!0,message:"请输入菜单",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}]}}},methods:{showEdit:function(e){this.isEdit=!e,e?(this.$refs.dialog.showDialog("编辑菜单"),this.form=Object.assign({},e)):(this.$refs.dialog.showDialog("添加菜单"),this.form=this.initForm())},initForm:function(){return{title:"",roles:"",path:"",icon:"",note:""}},closeDialog:function(){this.$refs.dialog.closeDialog()},cancel:function(){this.from=this.initForm(),this.$refs.form.resetFields()},sublimt:function(){var e=this;this.$refs.form.validate((function(t){return!!t&&void e.$emit("Submit",{form:e.form})}))}}},f=(a("a402"),a("2877")),m=(i=Object(f.a)(h,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("wb-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"dialog",on:{cancel:e.cancel,sublimt:e.sublimt}},[t("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"标题",prop:"title"}},[t("el-input",{attrs:{placeholder:"标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"菜单",prop:"roles"}},[t("el-input",{attrs:{placeholder:"菜单"},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"path"}},[t("el-input",{attrs:{placeholder:"地址"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}})],1),t("el-form-item",{attrs:{label:"图标",prop:"icon"}},[t("el-input",{attrs:{placeholder:"图标"},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"note"}},[t("el-input",{attrs:{placeholder:"备注"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1)}),[],!1,null,"944bb236",null).exports,h={name:"SearchRoles",data:function(){return{form:this.initForm(),isOpen:!1,searchParams:this.initSearch()}},methods:{showOpen:function(){var e=this;this.$nextTick((function(){e.isOpen=!e.isOpen,e.$refs.wbHeadSearch.showAnimation(e.isOpen)}))},refresh:function(){this.searchParams=this.initSearch(),this.form=this.initForm(),this.$emit("onRefresh",this.searchParams)},search:function(){this.searchParams=Object.assign(this.searchParams,this.form),this.$emit("onSearch",this.searchParams)},initForm:function(){return{title:"",roles:"",path:"",icon:"",note:""}},initSearch:function(){return{page:1,pageSize:2,sort:"DESC",sortKey:"id",user:"",name:""}}}},h=(a("ccfa"),Object(f.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"center"},[a("wb-head-search",{ref:"wbHeadSearch",scopedSlots:e._u([{key:"title",fn:function(){return[a("el-row",{staticClass:"search-row",attrs:{gutter:10}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{size:"mini",placeholder:"标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title","string"==typeof t?t.trim():t)},expression:"form.title"}})],1),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{size:"mini",placeholder:"菜单"},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles","string"==typeof t?t.trim():t)},expression:"form.roles"}})],1),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{size:"mini",placeholder:"地址"},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path","string"==typeof t?t.trim():t)},expression:"form.path"}})],1),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{size:"mini",placeholder:"图标"},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon","string"==typeof t?t.trim():t)},expression:"form.icon"}})],1),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{size:"mini",placeholder:"备注"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note","string"==typeof t?t.trim():t)},expression:"form.note"}})],1),a("el-col",{attrs:{span:3,offset:6}},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:e.search}}),a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh",circle:""},on:{click:e.refresh}}),a("el-button",{attrs:{type:"primary",icon:e.isOpen?"el-icon-caret-top":"el-icon-caret-bottom",circle:""},on:{click:e.showOpen}})],1)])],1)]},proxy:!0}])})],1)}),[],!1,null,"2b424bd0",null).exports),a("a18c"));h={components:{EditRoles:i,SearchRoles:h},data:function(){return{tableData:[],tableDataSize:0,searchParams:{page:1,pageSize:2,sort:"DESC",sortKey:"id"},selectTableData:[],syncData:[],loading:!1}},mounted:function(){this.loading=!0,this.refreshTable()},methods:{selectSizeChange:function(e){this.searchParams.pageSize=e,this.refreshTable()},selectCurrentChange:function(e){this.refreshTable()},selectTable:function(e){this.selectTableData=e},showEditRoles:function(e){this.$refs.editRoles.showEdit(e)},addRoles:function(){this.$refs.editRoles.showEdit()},syncRoles:function(){var e=this;this.syncData=[];var t=Object(u.a)();this.toBaisRoles(m.d,this.syncData),c(this.syncData).then((function(a){a=a.data,200===a.code?e.$message.success(a.msg):e.$message.error(a.msg),t.close(),e.refreshTable()})).catch((function(a){e.$message.error(String(a)),t.close(),e.refreshTable()}))},toBaisRoles:function(e){var t=this;e.forEach((function(e){!e.children&&e.meta&&t.syncData.push({title:e.meta.title,roles:e.name,path:e.path,icon:e.meta.icon,note:"同步添加"}),e.children&&0<e.children.length&&t.toBaisRoles(e.children)}))},refreshTable:function(e){var t=this;e=e||this.searchParams,this.searchParams=Object(s.a)({},e),this.tableData=[],this.selectTableData=[],this.loading=!0,n(e).then((function(e){e=e.data,t.tableData=e.data.list,t.tableDataSize=e.data.size,t.loading=!1})).catch((function(e){console.log(e),t.loading=!1}))},submit:function(e){var t=this,a=e.form,s=(e.rolesAll,Object(u.a)());l(a).then((function(e){e=e.data,200===e.code?(t.$refs.editRoles.closeDialog(),t.$message.success(e.msg)):t.$message.error(e.msg),s.close(),t.refreshTable()})).catch((function(e){t.$message.error(String(e)),s.close(),t.$refs.editRoles.closeDialog()}))},deleteRoles:function(e){var t=this,a={};e.id?a.rolesIds=[e.id]:0<this.selectTableData.length?a.rolesIds=this.selectTableData.map((function(e){return e.id})):this.$message.warning("未选择行!"),this.$confirm("确认删除用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o(Object(s.a)({},a)).then((function(e){e=e.data,t.refreshTable(),200===e.code&&t.$message.success(e.msg)})).catch((function(e){console.log(e),t.$message.error(String(e))}))})).catch((function(){}))}}},a("87d5"),h=Object(f.a)(h,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"center"},[a("search-roles",{on:{onRefresh:e.refreshTable,onSearch:e.refreshTable}}),a("el-row",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addRoles}},[e._v("新键")]),a("el-button",{attrs:{type:"warning",size:"mini",title:"将客户端路由列表同步到服务器中"},on:{click:e.syncRoles}},[e._v("同步")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.deleteRoles}},[e._v("删除")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,stripe:""},on:{"selection-change":e.selectTable}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"title",label:"标题",width:"180"}}),a("el-table-column",{attrs:{prop:"roles",label:"菜单",width:"180"}}),a("el-table-column",{attrs:{prop:"path",label:"地址",width:"180"}}),a("el-table-column",{attrs:{prop:"icon",label:"图标",width:"180"}}),a("el-table-column",{attrs:{prop:"note",label:"备注"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.showEditRoles(t.row)}}},[e._v("查看")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteRoles(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.searchParams.page,"page-sizes":[2,10,20,40],"page-size":e.searchParams.pageSize,layout:"total,sizes, prev, pager, next",total:e.tableDataSize},on:{"size-change":e.selectSizeChange,"current-change":e.selectCurrentChange,"update:currentPage":function(t){return e.$set(e.searchParams,"page",t)},"update:current-page":function(t){return e.$set(e.searchParams,"page",t)}}}),a("edit-roles",{ref:"editRoles",on:{Submit:e.submit}})],1)}),[],!1,null,"2649aec3",null);t.default=h.exports},"74e4":function(e,t,a){},"87d5":function(e,t,a){"use strict";a("4886")},a402:function(e,t,a){"use strict";a("74e4")},ccfa:function(e,t,a){"use strict";a("25e1")}}]);